###  <i class="fa fa-user-circle"></i> Activity 4d: Download and populate Stoplight with an OpenAPI specification

In this activity, you'll work with an OpenAPI file in Stoplight, which provides a GUI editor for working with the OpenAPI specification information. To speed things up, you'll start with a pre-built OpenAPI file that you paste into the Stoplight editor, and then you'll make some modifications to it using Stoplight's visual modeling tools.

You can use Stoplight in the browser or as a web app. For simplicity, we'll use the browser version.

To work with an OpenAPI file in Stoplight:

1.  Unless you already have an OpenAPI specification file, download the [OpenWeatherMap API spec file](https://idratherbewriting.com/learnapidoc/docs/rest_api_specifications/openapi_openweathermap.yml).
2.  Go to [next.stoplight.io/](https://next.stoplight.io/).
3.  Click **Login** in the upper-right corner and log in using your GitHub account.
4.  Click **New Personal Project**.
5.  Type a **Project name** (e.g., OpenWeatherMap API), choose whether you want the visibility public or private (it doesn't matter), and click **Next**.
6.  On the next screen (Project Designer), select the **Import Existing** tab. Then the click **Upload OpenAPI (Swagger), Markdown or HTML File** button and select the **openapi_openweathermap.yml** file that you downloaded earlier.
7.  Click the **+openapi_openweathermap.oas2.yml** button. The OpenAPI file gets uploaded into Stoplight.
8.  At the top of the screen, switch between the **Code** and **Design** views by clicking the corresponding buttons at the top. Make some edits in the code and then switch to the Design view to see the edits reflected. The following video shows this process:

    <figure><div style="position:relative;height:0;padding-bottom:56.25%"><iframe src="https://www.youtube.com/embed/vqDJBa-haYs" width="560" height="340" frameborder="0" allow="autoplay; encrypted-media" style="position:absolute;width:100%;height:100%;left:0" allowfullscreen></iframe></div><figcaption>When you switch to the code view, the editor automatically goes to the part of the spec you were creating in the visual editor and highlights it. When you switch back, the visual UI updates with any changes you made in the code. Switching between modes is seamless and easy.</figcaption></figure>

9.  Explore the different options in the Design editor and make some arbitrary textual changes to see how to update information.

### Automatically generate schema documentation

One of the coolest features in Stoplight is the ability to auto-generate the schema documentation from a sample JSON response. Try this out by following these steps:

1.  In the middle column of Stoplight, click **PATHS**, and then click **/weather**, and then click **Call current weather data for ...**.
2.  Click **Raw Schema** and delete the existing response schema. (Even when you delete the info here, it will leave `{}` there, which is good.)
5.  Switch to the **Editor** tab, click **Generate from JSON** and paste in the following JSON response from the OpenWeatherMap weather endpoint:

    ```json
    {
      "coord": {
        "lon": -121.96,
        "lat": 37.35
      },
      "weather": [
        {
          "id": 721,
          "main": "Haze",
          "description": "haze",
          "icon": "50n"
        }
      ],
      "base": "stations",
      "main": {
        "temp": 67.42,
        "pressure": 1012,
        "humidity": 40,
        "temp_min": 55.4,
        "temp_max": 77
      },
      "visibility": 16093,
      "wind": {
        "speed": 12.75,
        "deg": 300,
        "gust": 8.7
      },
      "clouds": {
        "all": 75
      },
      "dt": 1524448800,
      "sys": {
        "type": 1,
        "id": 479,
        "message": 0.0043,
        "country": "US",
        "sunrise": 1524489736,
        "sunset": 1524538230
      },
      "id": 420006397,
      "name": "Santa Clara",
      "cod": 200
    }
    ```

6.  Then click **Generate!**.

    The JSON schema gets automatically generated:

    {% include course_image.html filename="stoplight_autogenerated_schema" ext_print="png" ext_web="png" alt="Autogenerated JSON schema" caption="Stoplight will autogenerate the JSON schema documentation" %}

    Here's a short video showing the process of auto-generating JSON. The Stoplight editor has evolved a bit, but it's still highly similar. (Instead of starting with the above sample JSON, the video makes request in Postman and then copies the response from there &mdash; but the idea should be clear.)

    <figure><div style="position:relative;height:0;padding-bottom:56.25%"><iframe src="https://www.youtube.com/embed/0IOWY0Hj3Xc?ecver=2" width="560" height="340" frameborder="0" allow="autoplay; encrypted-media" style="position:absolute;width:100%;height:100%;left:0" allowfullscreen></iframe></div><figcaption>Stoplight's visual modeling tools let you automatically create the correct JSON schema definition from a block of JSON that you paste in.</figcaption></figure>
