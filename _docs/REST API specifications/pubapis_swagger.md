---
title: "Swagger tutorial"
permalink: /pubapis_swagger.html
course: "Documenting REST APIs"
sidebar: docapis
weight: 8.2
section: restapispecifications
---

In this tutorial, you'll learn how to use Swagger UI to parse through a sample Swagger spec file and display an output that look similar to the [Swagger Petstore example](http://petstore.swagger.io/). The sample API will be the same weather API from Mashape [used earlier in this course](docapis_scenario_for_using_weather_api.html).

{% if site.target == "web" %}
* TOC
{:toc}
{% endif %}

## Swagger overview

Swagger is one of the most popular specifications for REST APIs for a number of reasons:

* Swagger generates an interactive API console for people to quickly learn about and try the API.
* Swagger generates the client SDK code needed for implementations on various platforms.
* The Swagger file can be auto-generated from code annotations on a lot of different platforms.
* Swagger has a strong community with helpful contributors.

The Swagger spec provides a way to describe your API using a specific JSON or YAML schema that outlines the names, order, and other details of the API.

You can code this Swagger file by hand in a text editor, or you can auto-generate it from annotations in your source code. Different tools can consume the Swagger spec file to generate the interactive API documentation. In the following tutorial, I'll show you how to code the Swagger spec file by hand.

For a more detailed conceptual overview of Swagger, see [Swagger Overview](pubapis_swagger_intro.html).

{: .note}
The interactive API documentation generated by the Swagger file is minimal. It shows the resources, parameters, requests, and responses. However, you'll still need a user guide that explains the many other aspects of how to use your API, such as how to get an API key, a hello-world tutorial, how to use the endpoints together to achieve an end goal, and so on.

## The Swagger Petstore example

To get a better understanding of Swagger, let's explore the Petstore example. Note that this UI is Swagger UI. Swagger can be rendered into different visual displays based on the visual framework you decide to use to parse the Swagger spec.

<a href="http://petstore.swagger.io/"><img src="images/swaggerpetstoreui.png" alt="Petstore UI" /></a>

There are three resources: pet, store, and user.

### Create a pet

1. In the **Pet** resource, click the **Post** method to expand it.
2. Click the **Try it out** button on the right. The request body becomes editable.
3. Change the value for the first `id` tag. (Make it unique so that others don't use the same `id`, and don't start with `0`.)
4. Change the `name` value to something unique. Here's an example:

   ```json
   {
   "id": 37987,
   "category": {
    "id": 0,
    "name": "string"
   },
   "name": "Mr. Fluffernutter",
   "photoUrls": [
    "string"
   ],
   "tags": [
    {
      "id": 0,
      "name": "string"
    }
   ],
   "status": "available"
   }
   ```

5. Click **Execute**.

	Look and see the response. It shows the [curl submitted](docapis_make_curl_call.html) and the [response](docapis_doc_sample_responses) from the API.

  {% include important.html content="You've really just created a pet with this API. You now need to take responsibility for it and begin feeding and caring for your new pet! All joking aside, most users don't realize they're playing with real data when they execute responses in an API (using their own API key). This test data may be something you have to wipe clean when you transition from exploring and learning about the API to actually using the API for production use." %}

### Find your pet by the ID

1. Expand the **GET `pet/{petId}`** method.
2. Click **Try it out.**
3. Insert your pet's ID in the `petId` value box.
4. Click **Execute**.

	 The request in curl format is shown, and your response appears below it. The response shows the name of the pet you created.

   By default, the response will be in XML. Change the **Response content type** selector to **application/json** and click **Execute** again. The pet response is returned in JSON format.

## Sorting out the Swagger components

As explained in the [Swagger overview](pubapis_swagger.html), Swagger has a number of different pieces. Here's a good time for a quick reminder.

* **[Swagger spec](https://github.com/swagger-api/swagger-spec)**: The Swagger spec is the official schema about name and element nesting, order, and so on. If you plan on hand-coding the Swagger files, you'll need to be extremely familiar with the Swagger spec.
* **[Swagger editor](http://editor.swagger.io/#/)**: The Swagger Editor is an online editor that validates your YML-formatted content against the rules of the Swagger spec. YML is a syntax that depends on spaces and nesting. You'll need to be familiar with YML syntax and the rules of the Swagger spec to be successful here. The Swagger editor will flag errors and give you formatting tips. (Note that the Swagger spec file can be in either JSON or YAML format.)
* **[Swagger-UI](https://github.com/swagger-api/swagger-ui)**: The Swagger UI is an HTML/CSS/JS framework that parses a JSON or YML file that follows the Swagger spec and generates a navigable UI of the documentation. This is the tool that transforms your spec into the Swagger Petstore-like UI output.
* **[Swagger-codegen](https://github.com/swagger-api/swagger-codegen)**: This utility generates client SDK code for a lot of different platforms (such as Java, JavaScript, Scala, Python, PHP, Ruby, Scala, and more). This client code helps developers integrate your API on a specific platform and provides for more robust implementations that might include more scaling, threading, and other necessary code. An SDK is supportive tooling that helps developers use the REST API.

## Some sample Swagger implementations

Before we get into this Swagger tutorial with another API (other than Petstore), check out a few Swagger implementations:

* [Reverb](https://reverb.com/swagger#!/accounts)
* [VocaDB](http://vocadb.net/swagger/ui/index)
* [Watson Developer Cloud](http://www.ibm.com/smarterplanet/us/en/ibmwatson/developercloud/apis/)

Most of them look pretty much the same, with minimal branding. You'll notice the documentation is short and sweet in a Swagger implementation. This is because the Swagger display is meant to be an interactive experience where you can try out calls and see responses &mdash; using your own API key to see your own data. It's the learn-by-doing-and-seeing-it approach.

{% include random_ad.html %}

Note a few limitations with the Swagger approach:

* There's not much room to describe in detail the workings of the endpoint.
* The Swagger UI looks mostly the same for each output.
* The Swagger UI will be a separate site from your other documentation.

## Create a Swagger UI display

In this activity, you'll create a Swagger UI display for the weatherdata endpoint in this [Mashape Weather API](https://www.mashape.com/fyhao/weather-13#weatherdata). (If you're jumping around in the documentation, this is a simple API that we used in earlier parts of the course.) You can see a demo of what we'll build [here](http://idratherbewriting.com/files/restapicourse/swagger):

<a href="http://idratherbewriting.com/files/restapicourse/swagger"><img src="images/myswagger.png" alt="Swagger UI demo" /></a>

### a. Create a Swagger spec file

To create a Swagger spec file:

1.  Go to the [Swagger online editor](http://editor.swagger.io/#/).

    You could just customize this sample YML file with the weatherdata endpoint documentation. However, if you're new to Swagger it will take you some time to learn the spec. For the sake of convenience, just go to the following file, and then copy and paste its code into the Swagger editor: <a href="http://idratherbewriting.com/files/restapicourse/swagger/swagger.yaml">swagger.yaml</a>.

    Here's what the Swagger YAML file looks like:

    ```yaml
    swagger: "2.0"
    info:
     version: "1.0.0"
     title: "Weather API"
     description: "A sample API that uses a Mashape weather API as an example to demonstrate features in the swagger-2.0 specification"
     termsOfService: "http://helloreverb.com/terms/"
     contact:
       name: "Tom Johnson"
       email: "tomjohnson1492@gmail.com"
       url: "http://swagger.io"
     license:
       name: "MIT"
       url: "http://opensource.org/licenses/MIT"
    host: "simple-weather.p.mashape.com"
    schemes:
     - "https"
    consumes:
     - "application/json"
    produces:
     - "application/text"
    paths:
     /aqi:
       get:
         tags:
           - "Air Quality"
         description: "gets air quality index"
         operationId: "getAqi"
         produces:
           - "text"
         parameters:
           -
             name: "lat"
             in: "query"
             description: "latitude"
             required: false
             type: "string"
           -
             name: "lng"
             in: "query"
             description: "longitude"
             required: false
             type: "string"
         responses:
           200:
             description: "aqi response"
           default:
             description: "unexpected error"

     /weather:
       get:
         tags:
           - "Weather Forecast"
         description: "gets weather forecast in short label"
         operationId: "getWeather"
         produces:
           - "text"
         parameters:
           -
             name: "lat"
             in: "query"
             description: "latitude"
             required: false
             type: "string"
           -
             name: "lng"
             in: "query"
             description: "longitude"
             required: false
             type: "string"
         responses:
           200:
             description: "weather response"
           default:
             description: "unexpected error"
     /weatherdata:
       get:
         tags:
           - "Full Weather Data"
         description: "Get weather forecast by Latitude and Longitude"
         operationId: "getWeatherData"
         produces:
           - "application/json"
         parameters:
           -
             name: "lat"
             in: "query"
             description: "latitude"
             required: false
             type: "string"
           -
             name: "lng"
             in: "query"
             description: "longitude"
             required: false
             type: "string"
         responses:
           200:
             description: "weatherdata response"
           default:
             description: "unexpected error"

    securityDefinitions:
      internalApiKey:
        type: apiKey
        in: header
        name: X-Mashape-Key
    ```

    {: .note}
    Notice that this is [YML](pubapis_yaml.html) instead of [JSON](docapis_analyze_json.html). YML syntax is a more human-readable form of JSON. With YML, spacing matters. New levels are set with two indented spaces. The colon indicates an object. Hyphens represent a sequence or list (like an array). If you [download this file](http://idratherbewriting.com/files/restapicourse/swagger/swagger.yaml) instead of copy-and-pasting it above, you're less likely to run into spacing errors.

    The Swagger editor shows you how the file will look in the output. You'll also be able to see if there are any validity errors. Without this online editor, you would only know that the YML syntax is valid/invalid when you run the code (and potentially see errors indicating that the YAML file couldn't be parsed).

2.  Make sure the YAML file is valid in the Swagger editor. If there are any errors, fix them.
4.  Go to **File > Download YAML** and save the file as "swagger.yaml" on your computer. (You could also just copy the code and insert it into a blank file and call it swagger.yaml. The Download doesn't change the content displayed in the Swagger Editor.)

You can also choose JSON as the format, but YAML is more readable and works just as well.

### b. Set Up the Swagger UI

1. Go to the [Swagger UI **2.x** branch](https://github.com/swagger-api/swagger-ui/tree/2.x) Github project.

   {: .note}
   This tutorial is not yet compatible with the upcoming version 3.0 of Swagger. Currently, there's a bit of a disconnect because the walk-through of the Petstore site in the earlier section showcased 3.0, but the tutorial in this section covers 2.0. A new version of this tutorial is coming.

2. Click **Clone or download**, and then click **Download ZIP** button. Download the files to a convenient location on your computer and extract the files. (Note that you can also do a git clone to get the code as well.)

	The only folder you'll be working with here is the dist folder. Everything else is used only if you're regenerating the files, which is beyond the scope of this tutorial.

3.  Drag the **dist** folder out of the swagger-ui-master folder so that it stands alone. Then delete the swagger-ui-master folder.
4.  Inside your **dist** folder, open **index.html** in a text editor such as Atom or Sublime Text.
5.  Look for the following code:

    ```js
    url = "http://petstore.swagger.io/v2/swagger.json";
    ```

5.  Change the `url` value from `http://petstore.swagger.io/v2/swagger.json` to the following:

    ```js
    url = "swagger.yaml";
    ```

    Save the file.

6.  Drag the **swagger.yaml** file that you created earlier into the same directory as the index.html file you just edited. Your file structure should look as follows:

    ```
    ├── css
    ├── fonts
    ├── images
    ├── index.html
    ├── lang
    ├── lib
    ├── o2c.html
    ├── swagger-ui.js
    ├── swagger-ui.min.js
    └── swagger.yml
    ```

7.  Upload the folder to a web server and go to the folder path. For example, if you called your directory **dist** (leaving it unchanged), you would go to **http:/myserver.com/dist**.

    {: .note}
    If you go to **http:/myserver.com/dist/index.html**, Swagger UI seems to get the path to the swagger.yml file wrong, writing it as **http:/myserver.com/dist/index.html/swagger.yml** instead. As a foolproof approach, code the absolute URL to swagger in the index file rather than the relative URL as you did with (`url = "swagger.yaml"`).


Here's [a sample Swagger UI folder uploaded](http://idratherbewriting.com/files/restapicourse/swagger/).

Alternatively, you can download [XAMPP](https://www.apachefriends.org/index.html) to run a server locally on your own machine and move the files into XAMPP's **htdocs** folder, and then go to `localhost/<folder name>/index.html`. For detailed instructions, see the [next section](#xampptutorial)

### c. View the Swagger UI Display Locally with XAMPP {#xampptutorial}

1. Download and install [XAMPP](https://www.apachefriends.org/). Choose the version that's right for your machine.
2. After installation, in your **Applications** folder (on a Mac), open the **XAMPP** folder and start the **manager-osx** console. (For Windows, run XAMPP from your list of Applications.)
2. Click the **Manage Servers** tab in the console manager.
3. Select **Apache Web Server** and click **Start**.
4. Click the **Welcome** tab. Then click **Open Application Folder**.
5. Drag the dist folder into the **htdocs** folder. (Everything inside htdocs is accessible from the localhost path.)
6. In your browser, go to **localhost/dist**.

The Swagger UI display should appear.

{: .note}
The Swagger UI display shows the 2.0 version of the theme, note the [3.0 version as on the Swagger Petstore UI](http://petstore.swagger.io/), which hasn't officially been released. The 3.0 version is forthcoming in this tutorial.

### Interact with the Swagger UI

1.  Go to the URL where you uploaded your Swagger files. Alternatively, if you're using XAMPP locally, go to **localhost/dist**.
2.  In the upper-right corner, click **Authorize** and enter your [Mashape API key](docapis_get_auth_keys.html) in the dialog box's **value** field. If you don't have a Mashape API key, you can use **EF3g83pKnzmshgoksF83V6JB6QyTp1cGrrdjsnczTkkYgYrp8p**.
3.  Go to [Google Maps](https://maps.google.com) and search for an address.
4.  Get the latitude and longitude from the URL, and plug it into your Swagger UI. (For example, **1.3319164** for lat, **103.7231246** for lng. This is Singapore.)
5.  Click **Try it out**.

	  If successful, you should see something in the response body like this:

    ```
	  9c, Mostly Cloudy at South West, Singapore
    ```

    If you see a response that says "Not supported," try the lat and lng coordinates used here. Try working with each of your endpoints and see the data that gets returned.

	  Note that if you refresh the page, you'll need to re-enter your API key.

## Auto-generating the Swagger file from code annotations

Instead of coding the Swagger file by hand, you can also auto-generate it from annotations in your programming code. There are many Swagger libraries for integrating with different code bases. These Swagger libraries then parse the annotations that developers add and generate the same Swagger file that you produced manually using the earlier steps.

By integrating Swagger into the code, you allow developers to easily write documentation, make sure new features are always documented, and keep the documentation more current. Here's a [tutorial on annotating code with Swagger for Scalatra](http://www.infoq.com/articles/swagger-scalatra). The annotation methods for Swagger doc blocks vary based on the programming language.

For other tools and libraries, see [Swagger services and tools](http://swagger.io/open-source-integrations/).
